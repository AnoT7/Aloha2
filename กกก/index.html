<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ 1</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="font.css">
</head>
<body>
  <div class="container">
    <h1>‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô SmokeDetector Guide</h1>
    <div class="brand-title">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Arduino IDE </div>
     <ol> 
      <li><a href="https://www.arduino.cc/en/software/" target="_blank">Download Arduino IDE ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ</a></li>
      <li>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å  Windows ‡πÅ‡∏•‡∏∞‡∏Å‡∏î Just Download ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</li>
      <li>‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏±‡∏ß‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏≤ Arduino.EXE </li>
      <li>‡∏Ñ‡∏•‡∏¥‡πä‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Driver *‡∏´‡∏≤‡∏Å‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å </li>
      <li>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û <br> <br><img src="image/D1.png"/> </li>
      <li>
        <pre><code>
#include &lt;ESP8266WiFi.h&gt;

const int analogInPin = A0;
const int redPin = D5;
const int yellowPin = D6;
const int greenPin = D7;
const int buzzerPin = D2;
const int smokeThreshold = 40;
//‡πÄ‡∏õ‡∏¥‡∏î Hotspot ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ
const char* ssid = "smkdt";
const char* password = "123456789";

void setup() {
  Serial.begin(115200);
  pinMode(redPin, OUTPUT);
  pinMode(yellowPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(buzzerPin, OUTPUT);
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    digitalWrite(yellowPin, HIGH);
    digitalWrite(redPin, LOW);
    digitalWrite(greenPin, LOW);
    digitalWrite(buzzerPin, LOW);
    Serial.print(".");
    delay(500);
  }
  Serial.println("\nWiFi connected");
  digitalWrite(yellowPin, LOW);
}

void loop() {
  int sensorValue = analogRead(analogInPin);
  int outputValue = map(sensorValue, 0, 1023, 0, 100);
  Serial.print("‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô: ");
  Serial.print(outputValue);
  Serial.println(" %");

  if (outputValue >= smokeThreshold) {
    digitalWrite(redPin, HIGH);
    digitalWrite(greenPin, LOW);
    digitalWrite(buzzerPin, HIGH);
  } else {
    digitalWrite(redPin, LOW);
    digitalWrite(greenPin, HIGH);
    digitalWrite(buzzerPin, LOW);
  }

  delay(500);
}
        </code></pre>
      </li>
    </ol>
    <div class="brand-title">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Arduino ‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡πá‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Å‡∏±‡∏ö‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏´‡∏•‡∏±‡∏Å </div>
    <ol>
    <li>‡πÉ‡∏´‡πâ‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏î‡∏π <br> <br><img src="image/WemosD1.png"/> </li>
    </ol>
    <div class="brand-title">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ó‡πÄ‡∏•‡πÅ‡∏Å‡∏£‡∏°</div>
    <div class="brand-subtitle">-‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ‡∏ó‡∏≥‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ‡∏≠‡πà‡∏≤‡∏ô</div>
    <ol>
    <li>‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î telegram ‡∏°‡∏≤‡πÉ‡∏ä‡πâ</li>
    <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏û‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</li>
    <li>‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ä‡∏´‡∏≤ @BotFather ‡πÅ‡∏•‡∏∞ @userinfobot ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏≠‡∏ó‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà‡πÄ‡∏•‡∏¢</li>
    <li>‡∏ó‡∏µ‡πà @BotFather ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á /newbot ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ç‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞ user ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ä‡∏∑‡πà‡∏≠ MyGasAlertBot ‡∏™‡πà‡∏ß‡∏ô User mq2gasbott ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏≤ token ‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û <br> <br><img src="image/bottoken1.png"/>   <br>  </li>
    <br>
    <li>‡∏ó‡∏µ‡πà @userinfobot ‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏≠‡∏î‡∏µ‡∏°‡∏≤ <br> <br><img src="image/botid1.png"/></li>
    <br>
    <li>‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ä‡∏´‡∏≤‡∏ö‡∏≠‡∏ó‡∏ó‡∏µ‡πà‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ @mq2gasbott ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó</li>
    <li>‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡πá‡∏≠‡∏õ‡∏•‡∏¥‡πâ‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡πÉ‡∏ô‡∏•‡∏¥‡πâ‡∏á <br> https://api.telegram.org/bot<token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤>/sendMessage?chat_id=<‡πÑ‡∏≠‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤>&text=‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏à‡∏≤‡∏Å‡∏ö‡∏≠‡∏£‡πå‡∏î!<br> <br><img src="image/test1.png"/></li> 
    <br>
    <li>‡∏ñ‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ <br> https://api.telegram.org/bot<token ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤>/sendMessage?chat_id=<‡πÑ‡∏≠‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤>&text=‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏à‡∏≤‡∏Å‡∏ö‡∏≠‡∏£‡πå‡∏î!<br> <br><img src="image/Success1.png"/></li> 
       <li>
        <pre><code>
#include  &lt;ESP8266WiFi.h&gt;
#include  &lt;WiFiClientSecure.h&gt;

const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";

const char* botToken = "YOUR_TELEGRAM_BOT_TOKEN"; // ‡∏à‡∏≤‡∏Å BotFather
const char* chatID = "YOUR_CHAT_ID"; // ‡∏à‡∏≤‡∏Å @userinfobot

void setup() {
  Serial.begin(115200);
  WiFi.begin(ssid, password);

  // ‡∏£‡∏≠ WiFi ‡∏ï‡πà‡∏≠
  while (WiFi.status() != WL_CONNECTED) {
    delay(500); Serial.print(".");
  }
  Serial.println("\nWiFi connected");

  // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
  sendTelegram("üö® MQ-2 ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ!");
}

void loop() {
  // ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á MQ-2
}

void sendTelegram(String message) {
  WiFiClientSecure client;
  client.setInsecure(); // ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à SSL cert

  String url = "https://api.telegram.org/bot" + String(botToken) +
               "/sendMessage?chat_id=" + String(chatID) +
               "&text=" + urlencode(message);

  if (client.connect("api.telegram.org", 443)) {
    client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                 "Host: api.telegram.org\r\n" +
                 "Connection: close\r\n\r\n");
    delay(1000);
    while (client.available()) {
      Serial.write(client.read());
    }
  } else {
    Serial.println("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Telegram ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  }
}

String urlencode(String str) {
  String encoded = "";
  char c;
  char code0;
  char code1;
  for (int i = 0; i < str.length(); i++) {
    c = str.charAt(i);
    if (isalnum(c)) {
      encoded += c;
    } else {
      code1 = (c & 0xf) + '0';
      if ((c & 0xf) > 9) code1 = (c & 0xf) - 10 + 'A';
      c = (c >> 4) & 0xf;
      code0 = c + '0';
      if (c > 9) code0 = c - 10 + 'A';
      encoded += '%';
      encoded += code0;
      encoded += code1;
    }
  }
  return encoded;
}

          </code></pre>
        </li>
    </ol>
  <div class="brand-title">‡πÑ‡∏ü‡∏ô‡∏≠‡∏•‡πÇ‡∏Ñ‡πâ‡∏î</div>
<div class="brand-subtitle">
        <pre><code>
#include &lt;ESP8266WiFi.h&gt;
#include &lt;WiFiClientSecure.h&gt;

// ---------- ‡πÄ‡∏ã‡πá‡∏ï Wi-Fi ----------
const char* ssid = "smkdt";             // ‡∏ä‡∏∑‡πà‡∏≠ Wi-Fi
const char* password = "123456789";     // ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Wi-Fi

// ---------- Telegram Bot ----------
const char* botToken = "YOUR_BOT_TOKEN";  // ‡πÉ‡∏™‡πà token ‡∏à‡∏≤‡∏Å BotFather
const char* chatID   = "YOUR_CHAT_ID";    // chat_id ‡∏à‡∏≤‡∏Å @userinfobot

// ---------- ‡∏û‡∏¥‡∏ô ----------
const int analogInPin = A0;
const int redPin = D5;
const int yellowPin = D6;
const int greenPin = D7;
const int buzzerPin = D2;

// ---------- ‡∏Ñ‡πà‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î ----------
const int smokeThreshold = 40;
bool hasAlerted = false;  // ‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á Telegram ‡∏ã‡πâ‡∏≥‡∏£‡∏±‡∏ß ‡πÜ

void setup() {
  Serial.begin(115200);

  // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≤
  pinMode(redPin, OUTPUT);
  pinMode(yellowPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(buzzerPin, OUTPUT);

  // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wi-Fi
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    digitalWrite(yellowPin, HIGH);
    digitalWrite(redPin, LOW);
    digitalWrite(greenPin, LOW);
    digitalWrite(buzzerPin, LOW);
    Serial.print(".");
    delay(500);
  }

  Serial.println("\nWiFi connected");
  digitalWrite(yellowPin, LOW);
}

void loop() {
  int sensorValue = analogRead(analogInPin);
  int outputValue = map(sensorValue, 0, 1023, 0, 100);

  Serial.print("‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô: ");
  Serial.print(outputValue);
  Serial.println(" %");

  if (outputValue >= smokeThreshold) {
    digitalWrite(redPin, HIGH);
    digitalWrite(greenPin, LOW);
    digitalWrite(buzzerPin, HIGH);

    if (!hasAlerted) {
      sendTelegram("üö® MQ-2 ‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Ñ‡∏ß‡∏±‡∏ô‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ! (" + String(outputValue) + "%)");
      hasAlerted = true;
    }
  } else {
    digitalWrite(redPin, LOW);
    digitalWrite(greenPin, HIGH);
    digitalWrite(buzzerPin, LOW);
    hasAlerted = false;
  }

  delay(1000);
}

// ---------- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram ----------
void sendTelegram(String message) {
  WiFiClientSecure client;
  client.setInsecure(); // ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö SSL cert

  String url = "https://api.telegram.org/bot" + String(botToken) +
               "/sendMessage?chat_id=" + String(chatID) +
               "&text=" + urlencode(message);

  if (client.connect("api.telegram.org", 443)) {
    client.print(String("GET ") + url + " HTTP/1.1\r\n" +
                 "Host: api.telegram.org\r\n" +
                 "Connection: close\r\n\r\n");
    delay(500);

    while (client.available()) {
      Serial.write(client.read()); // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å Telegram
    }
  } else {
    Serial.println("‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Telegram ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
  }
}

// ---------- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡πÉ‡∏ô URL ‡πÑ‡∏î‡πâ ----------
String urlencode(String str) {
  String encoded = "";
  char c;
  char code0, code1;
  for (int i = 0; i < str.length(); i++) {
    c = str.charAt(i);
    if (isalnum(c)) {
      encoded += c;
    } else {
      code1 = (c & 0xf) + '0';
      if ((c & 0xf) > 9) code1 = (c & 0xf) - 10 + 'A';
      code0 = (c >> 4) + '0';
      if ((c >> 4) > 9) code0 = (c >> 4) - 10 + 'A';
      encoded += '%';
      encoded += code0;
      encoded += code1;
    }
  }
  return encoded;
} 
          </code></pre>
        </div>
  </div>
</body>
</html>
